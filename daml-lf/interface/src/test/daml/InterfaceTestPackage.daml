-- Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.
-- SPDX-License-Identifier: Apache-2.0

module InterfaceTestPackage where

template Foo with
    party: Party
  where
    signatory party
    choice Bar: () with
      controller party
      do
        return ()

    implements TIf where
      dup = create this <* exercise Archive self

interface TIf t
  dup: ContractId t -> Update (ContractId t)
  choice Useless: (ContractId t, ContractId TIf) with
      concrete: ContractId t
      interfacely: ContractId TIf
    controller getOwner this
    do
      tid <- dup concrete
      return (tid, toInterfaceContractId tid)
